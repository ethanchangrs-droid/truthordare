/**
 * 风格维度定义 - 公共模块
 * 用于增强题目多样性，避免单一话题重复
 * 
 * 本文件被以下模块引用：
 * - backend/src/services/llmService.js
 * - functions/api/generate.js (通过打包)
 * 
 * ⚠️ 修改此文件后需要：
 * 1. 重启 backend 服务（本地开发）
 * 2. 重新打包并部署 functions（生产环境）
 */

export const styleDimensions = {
  '暧昧': {
    truth: [
      '初次见面的印象',
      '暗恋的秘密',
      '约会中的小细节',
      '浪漫幻想',
      '个人喜好'
    ],
    dare: [
      '身体接触的尴尬瞬间',
      '暧昧的肢体语言',
      '亲密关系边界',
      '个人喜好'
    ]
  },
  '搞笑': {
    truth: [
      '尴尬糗事',
      '童年趣事',
      '奇葩经历',
      '社死瞬间',
      '荒诞想象',
      '个人喜好'
    ],
    dare: [
      '模仿表演',
      '恶搞挑战',
      '沙雕行为',
      '个人喜好'
    ]
  },
  '社牛': {
    truth: [
      '大胆搭讪',
      '陌生人互动',
      '勇敢表达',
      '个人喜好'
    ],
    dare: [
      '公开表演',
      '社交挑战',
      '自我展示',
      '破冰游戏',
      '个人喜好'
    ]
  },
  '职场': {
    truth: [
      '职场政治',
      '领导关系',
      '同事八卦',
      '职业规划',
      '工作失误',
      '办公室恋情',
      '跳槽经历',
      '职场困境',
      '个人喜好'
    ],
    dare: [
      '个人喜好'
    ]
  },
  '酒局': {
    truth: [
      '酒量糗事',
      '酒后失态',
      '劝酒文化',
      '酒桌规矩',
      '醉酒经历',
      '酒后真话',
      '个人喜好'
    ],
    dare: [
      '喝酒游戏',
      '拼酒挑战',
      '个人喜好'
    ]
  },
  '家庭': {
    truth: [
      '父母关系',
      '兄弟姐妹',
      '家庭秘密',
      '童年回忆',
      '家族传统',
      '代际冲突',
      '亲情时刻',
      '家庭责任',
      '个人喜好'
    ],
    dare: [
      '个人喜好'
    ]
  },
  '烧脑': {
    truth: [
      '逻辑推理',
      '道德困境',
      '哲学思考',
      '假设情境',
      '价值选择',
      '心理测试',
      '智力挑战',
      '深度追问',
      '个人喜好'
    ],
    dare: [
      '个人喜好'
    ]
  },

  '派对': {
    truth: [
      '游戏互动',
      '即兴创作',
      '节奏挑战',
      '热场活动',
      '个人喜好'
    ],
    dare: [
      '才艺表演',
      '团队协作',
      '角色扮演',
      '集体惩罚',
      '个人喜好'
    ]
  },
  '温情': {
    truth: [
      '感恩时刻',
      '友情回忆',
      '善良行为',
      '温暖瞬间',
      '心灵成长',
      '真诚表达',
      '情感支持',
      '美好愿望',
      '个人喜好'
    ],
    dare: [
      '个人喜好'
    ]
  },
  '大尺度': {
    truth: [
      '性经历',
      '身体隐私',
      '情欲挑战',
      '性话题',
      '大胆表白',
      '禁忌边缘',
      '个人喜好'
    ],
    dare: [
      '亲密接触',
      '个人喜好'
    ]
  },
  '少儿适宜': {
    truth: [
      '校园趣事',
      '兴趣爱好',
      '动画游戏',
      '友谊故事',
      '梦想分享',
      '创意想象',
      '个人喜好'
    ],
    dare: [
      '运动挑战',
      '才艺展示',
      '个人喜好'
    ]
  },
  '正常': {
    truth: [
      '生活经历',
      '人际关系',
      '个人成长',
      '兴趣爱好',
      '未来规划',
      '价值观念',
      '情感表达',
      '社交互动',
      '个人喜好'
    ],
    dare: [
      '个人喜好'
    ]
  }
};

/**
 * 获取风格的话题维度提示
 * @param {string} style - 风格名称
 * @returns {string} 维度提示文本
 */
export function getDimensionHint(style) {
  const styleConfig = styleDimensions[style];
  if (!styleConfig) return '';
  
  // 如果是旧的数组格式，直接使用
  if (Array.isArray(styleConfig)) {
    return `\n话题维度参考（请从中选择不同维度，避免重复）：${styleConfig.join('、')}`;
  }
  
  // 如果是新的对象格式，合并 truth 和 dare 的维度（去重）
  const allDimensions = [...new Set([...(styleConfig.truth || []), ...(styleConfig.dare || [])])];
  if (allDimensions.length === 0) {
    return '';
  }
  return `\n话题维度参考（请从中选择不同维度，避免重复）：${allDimensions.join('、')}`;
}

