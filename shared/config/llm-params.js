/**
 * LLM å‚æ•°é…ç½® - å…¬å…±æ¨¡å—
 * 
 * âš ï¸ å•ä¸€çœŸå®æºï¼šæ‰€æœ‰ LLM å‚æ•°ç»Ÿä¸€åœ¨æ­¤é…ç½®
 * 
 * æœ¬æ–‡ä»¶è¢«ä»¥ä¸‹æ¨¡å—å¼•ç”¨ï¼š
 * - backend/src/services/llmService.js
 * - functions/api/generate.js (é€šè¿‡æ‰“åŒ…)
 * 
 * ä¿®æ”¹æ­¤æ–‡ä»¶åï¼š
 * 1. backend è‡ªåŠ¨ç”Ÿæ•ˆï¼ˆnodemon çƒ­é‡è½½ï¼‰
 * 2. functions éœ€è¦è¿è¡Œ `npm run build:functions` é‡æ–°æ‰“åŒ…
 */

/**
 * LLM è°ƒç”¨å‚æ•°é…ç½®
 */
export const llmParams = {
  // ğŸ² é‡‡æ ·å‚æ•°
  temperature: 1.0,          // éšæœºæ€§ï¼ˆ0-2ï¼Œè¶Šé«˜è¶Šéšæœºï¼‰
  maxTokens: 1000,           // æœ€å¤§ç”Ÿæˆ token æ•°
  frequencyPenalty: 1.5,     // é‡å¤è¯æƒ©ç½šï¼ˆ-2 åˆ° 2ï¼Œæ­£å€¼å‡å°‘é‡å¤ï¼‰
  presencePenalty: 1.2,      // è¯é¢˜æƒ©ç½šï¼ˆ-2 åˆ° 2ï¼Œæ­£å€¼é¼“åŠ±æ–°è¯é¢˜ï¼‰
  
  // ğŸ¤– æ¨¡å‹é…ç½®
  models: {
    tongyi: 'qwen-plus',     // å¯é€‰: qwen-max, qwen-turbo
    deepseek: 'deepseek-chat'
  },
  
  // ğŸ’¾ ç¼“å­˜é…ç½®
  cache: {
    ttl: 600,                // TTLï¼ˆç§’ï¼‰- 10 åˆ†é’Ÿ
    maxSize: 100             // æœ€å¤§ç¼“å­˜æ¡æ•°ï¼ˆLRUï¼‰
  },
  
  // ğŸš¦ é™æµé…ç½®
  rateLimit: {
    perMinute: 20            // æ¯åˆ†é’Ÿæœ€å¤§è¯·æ±‚æ¬¡æ•°
  }
};

/**
 * å‚æ•°è°ƒä¼˜æŒ‡å—
 */
export const ParamsTuningGuide = {
  temperature: {
    description: 'æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§å’Œåˆ›é€ æ€§',
    range: '0-2',
    current: 1.0,
    tips: [
      '0.7-0.9: æ›´ç¡®å®šã€ä¸€è‡´çš„è¾“å‡º',
      '1.0-1.2: å¹³è¡¡éšæœºæ€§å’Œè´¨é‡ï¼ˆæ¨èï¼‰',
      '1.3-2.0: æ›´æœ‰åˆ›æ„ï¼Œä½†å¯èƒ½ä¸ç¨³å®š'
    ]
  },
  frequencyPenalty: {
    description: 'é™ä½å·²å‡ºç°è¯æ±‡çš„é‡å¤æ¦‚ç‡',
    range: '-2 åˆ° 2',
    current: 1.5,
    tips: [
      '0.0: ä¸æƒ©ç½šé‡å¤',
      '0.5-1.0: è½»åº¦å‡å°‘é‡å¤',
      '1.0-1.5: ä¸­åº¦å‡å°‘é‡å¤ï¼ˆæ¨èï¼‰',
      '1.5-2.0: å¼ºåŠ›é¿å…é‡å¤'
    ]
  },
  presencePenalty: {
    description: 'é¼“åŠ±æ¨¡å‹æ¢ç´¢æ–°è¯é¢˜',
    range: '-2 åˆ° 2',
    current: 1.2,
    tips: [
      '0.0: ä¸é¼“åŠ±æ–°è¯é¢˜',
      '0.5-1.0: è½»åº¦é¼“åŠ±',
      '1.0-1.5: ä¸­åº¦é¼“åŠ±ï¼ˆæ¨èï¼‰',
      '1.5-2.0: å¼ºåŠ›é¼“åŠ±æ–°è¯é¢˜'
    ]
  },
  maxTokens: {
    description: 'å•æ¬¡ç”Ÿæˆçš„æœ€å¤§ token æ•°',
    range: '1-8192',
    current: 1000,
    tips: [
      '500: é€‚åˆå•æ¡çŸ­å†…å®¹',
      '1000: å•æ¡ä¸­ç­‰å†…å®¹ï¼ˆæ¨èï¼‰',
      '2000+: å¤šæ¡æˆ–é•¿å†…å®¹'
    ]
  }
};

