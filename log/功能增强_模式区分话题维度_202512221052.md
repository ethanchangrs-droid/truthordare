# 功能增强：模式区分话题维度

## 目标
实现每种风格在真心话/大冒险模式下有不同的话题维度，提升题目生成的相关性和准确性。

## 已完成步骤

### 1. 代码修改
- 修改 `/shared/prompt/dimensions.js`：将所有12种风格的维度定义从扁平数组重构为嵌套对象结构，包含 `truth` 和 `dare` 两个子数组
- 修改 `/shared/prompt/builder.js`：
  - 添加 `getDimensionsByMode` 函数，根据模式获取对应维度
  - 更新 `buildPrompt` 函数，使用新模式特定的维度选择逻辑
  - 保持向后兼容性，支持旧的数组格式

### 2. 测试验证
- 验证所有12种风格在两种模式下都能正确获取不同的维度
- 测试结果显示维度分配符合预期，例如：
  - 暧昧风格：
    - 真心话模式：初次见面的印象、暗恋的秘密等
    - 大冒险模式：身体接触的尴尬瞬间、暧昧的肢体语言等

### 3. 文档更新
- 复制创建 PRD 和 SPEC 的 V1.5 版本文档
- 更新版本号、时间戳和版本记录
- 更新 SPEC 中的代码架构图和 Prompt 模板说明

## 后续建议
1. 监控维度分布：记录每次请求选中的维度，统计命中率，确保分布均匀
2. 用户反馈收集：观察用户对新模式下题目相关性的评价
3. 维度优化：根据使用数据进一步优化各风格下的维度定义

## 技术细节
- 保持了对旧数组格式的向后兼容性
- 通过 `getDimensionsByMode` 函数实现了模式特定维度选择
- 在 `buildPrompt` 函数中集成了维度选择逻辑，确保生成的题目与模式和风格高度匹配